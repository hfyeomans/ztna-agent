# env.local - Local test environment configuration
# Task 004: E2E Relay Testing
#
# This file is sourced by test scripts. Override defaults here.

# ============================================================================
# Network Configuration
# ============================================================================

# Intermediate Server
INTERMEDIATE_HOST="127.0.0.1"
INTERMEDIATE_PORT="4433"

# App Connector local forwarding
CONNECTOR_LOCAL_PORT="8080"

# UDP Echo Server for testing
ECHO_SERVER_PORT="9999"

# Service ID for connector registration
TEST_SERVICE_ID="test-service"

# ============================================================================
# Timeouts
# ============================================================================

# Default timeout for operations (seconds)
TIMEOUT_SECONDS="30"

# QUIC idle timeout (matches components: 30000ms)
QUIC_IDLE_TIMEOUT_MS="30000"

# ============================================================================
# Protocol Constants (must match components)
# ============================================================================

# ALPN protocol identifier
ALPN_PROTOCOL="ztna-v1"

# Maximum DATAGRAM size
MAX_DATAGRAM_SIZE="1350"

# Registration type for Connector
REG_TYPE_CONNECTOR="0x11"

# QAD message type for OBSERVED_ADDRESS
QAD_OBSERVED_ADDRESS="0x01"

# ============================================================================
# Paths
# ============================================================================

# Certificate directory (relative to project root)
# Uses self-signed certs from intermediate-server for now
CERT_DIR="${PROJECT_ROOT:-../../..}/certs"

# Log directory
LOG_DIR="${E2E_DIR:-..}/artifacts/logs"

# Metrics directory
METRICS_DIR="${E2E_DIR:-..}/artifacts/metrics"

# ============================================================================
# Test Options
# ============================================================================

# Enable verbose logging
VERBOSE="${VERBOSE:-0}"

# Skip build step (use existing binaries)
SKIP_BUILD="${SKIP_BUILD:-0}"

# Keep components running after tests (for debugging)
KEEP_RUNNING="${KEEP_RUNNING:-0}"
