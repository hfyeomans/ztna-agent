# Deprecated/Removed Code — Task 013 Swift Modernization

## Removed Files

### `ios-macos/Extension/PacketTunnelProvider.swift` (107 lines)
- **Purpose:** Early scaffold NEPacketTunnelProvider with basic packet read loop
- **Replaced by:** `ios-macos/ZtnaAgent/Extension/PacketTunnelProvider.swift` (~1295 lines)
- **Reason:** The real implementation in the ZtnaAgent target has full QUIC transport, keepalives, reconnection, P2P hole punching, and multi-service routing

### `ios-macos/App/ContentView.swift` (82 lines)
- **Purpose:** Early scaffold SwiftUI app with basic VPN start button
- **Replaced by:** `ios-macos/ZtnaAgent/ZtnaAgent/ContentView.swift` (~270 lines)
- **Reason:** The real implementation has VPNManager with @Observable, server configuration UI, status observation, retry logic, and test automation flags

### `ios-macos/ZtnaAgent/ZtnaAgent/Persistence.swift` (57 lines)
- **Purpose:** Xcode CoreData template (PersistenceController with NSPersistentContainer)
- **Replaced by:** Nothing — CoreData is not used in this project
- **Reason:** Unused template code auto-generated by Xcode; project uses UserDefaults for persistence

## Removed Patterns

### DispatchSourceTimer (5 instances in PacketTunnelProvider.swift)
- **Old pattern:** `DispatchSource.makeTimerSource(queue:)` with `.schedule()` and `.setEventHandler()`
- **New pattern:** `Task { while !Task.isCancelled { try? await Task.sleep(for:) ... } }` with `networkQueue.async` dispatch
- **Reason:** Modern Swift structured concurrency; Task cancellation is cleaner than DispatchSource lifecycle management
- **Affected timers:** timeoutTimer, keepaliveTimer, reconnectTimer, holePunchTimer, p2pKeepaliveTimer

### print() in ContentView.swift (5 call sites)
- **Old pattern:** `print("[TEST] ...")` and `print("VPN start ...")`
- **New pattern:** `Logger(subsystem:category:)` with `.info()`, `.warning()`, `.error()`
- **Reason:** Unified logging with os.log enables Console.app filtering and system log integration
